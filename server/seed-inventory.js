const mongoose = require('mongoose');
const Product = require('./Model/ProductModel');
const Category = require('./Model/CategoryModel');
const User = require('./Model/UserModel');
const Prescription = require('./Model/PrescriptionModel');
require('dotenv').config();

const seedInventoryData = async () => {
    try {
        await mongoose.connect(process.env.MONGO_URI);
        console.log('Connected to MongoDB');

        // Clear existing inventory data
        console.log('Clearing existing inventory data...');
        await Product.deleteMany({});
        await Category.deleteMany({});
        await Prescription.deleteMany({});

        // Create default categories
        const categories = [
            { name: 'Medications', description: 'Pharmaceutical drugs and medications', icon: '💊', isDefault: true },
            { name: 'Medical Supplies', description: 'General medical supplies and equipment', icon: '🏥', isDefault: true },
            { name: 'PPE', description: 'Personal Protective Equipment', icon: '🦺', isDefault: true },
            { name: 'Surgical Instruments', description: 'Surgical tools and instruments', icon: '⚕️', isDefault: true },
            { name: 'Laboratory Supplies', description: 'Lab equipment and reagents', icon: '🧪', isDefault: true },
            { name: 'First Aid', description: 'First aid kits and emergency supplies', icon: '🩹', isDefault: true },
            { name: 'Diagnostic Equipment', description: 'Diagnostic tools and devices', icon: '🔬', isDefault: true },
            { name: 'Disposables', description: 'Single-use disposable items', icon: '🗑️', isDefault: true }
        ];

        console.log('Creating categories...');
        await Category.insertMany(categories);
        console.log(`✓ Created ${categories.length} categories`);

        // Helper function to generate dates
        const addDays = (date, days) => {
            const result = new Date(date);
            result.setDate(result.getDate() + days);
            return result;
        };

        const today = new Date();

        // Sample products with realistic medical inventory data
        const products = [
            // MEDICATIONS (30 products)
            {
                name: 'Paracetamol 500mg Tablets',
                sku: 'MED-PAR-500',
                category: 'Medications',
                description: 'Pain relief and fever reducer',
                manufacturer: 'PharmaCorp Ltd',
                supplier: 'MediSupply Co.',
                buyingPrice: 0.50,
                sellingPrice: 1.20,
                currentStock: 5000,
                minStock: 500,
                maxStock: 10000,
                reorderPoint: 800,
                unit: 'tablets',
                batchNumber: 'PAR2024001',
                manufactureDate: new Date('2024-01-15'),
                expiryDate: addDays(today, 720),
                barcode: '8901234567890',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Amoxicillin 250mg Capsules',
                sku: 'MED-AMX-250',
                category: 'Medications',
                description: 'Antibiotic for bacterial infections',
                manufacturer: 'BioPharm Industries',
                supplier: 'Global Pharma Distributors',
                buyingPrice: 2.50,
                sellingPrice: 5.00,
                currentStock: 800,
                minStock: 200,
                maxStock: 2000,
                reorderPoint: 300,
                unit: 'capsules',
                batchNumber: 'AMX2024015',
                manufactureDate: new Date('2024-03-01'),
                expiryDate: addDays(today, 540),
                barcode: '8901234567891',
                prescription: true,
                status: 'active'
            },
            {
                name: 'Ibuprofen 400mg Tablets',
                sku: 'MED-IBU-400',
                category: 'Medications',
                description: 'Anti-inflammatory and pain relief',
                manufacturer: 'HealthCare Pharmaceuticals',
                supplier: 'MediSupply Co.',
                buyingPrice: 0.80,
                sellingPrice: 2.00,
                currentStock: 3200,
                minStock: 400,
                maxStock: 5000,
                reorderPoint: 600,
                unit: 'tablets',
                batchNumber: 'IBU2024022',
                manufactureDate: new Date('2024-02-20'),
                expiryDate: addDays(today, 650),
                barcode: '8901234567892',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Metformin 500mg Tablets',
                sku: 'MED-MET-500',
                category: 'Medications',
                description: 'Diabetes medication for blood sugar control',
                manufacturer: 'DiabeCare Labs',
                supplier: 'Global Pharma Distributors',
                buyingPrice: 1.20,
                sellingPrice: 3.00,
                currentStock: 1500,
                minStock: 300,
                maxStock: 3000,
                reorderPoint: 450,
                unit: 'tablets',
                batchNumber: 'MET2024008',
                manufactureDate: new Date('2024-01-10'),
                expiryDate: addDays(today, 600),
                barcode: '8901234567893',
                prescription: true,
                status: 'active'
            },
            {
                name: 'Omeprazole 20mg Capsules',
                sku: 'MED-OME-020',
                category: 'Medications',
                description: 'Proton pump inhibitor for acid reflux',
                manufacturer: 'GastroMed Solutions',
                supplier: 'MediSupply Co.',
                buyingPrice: 1.50,
                sellingPrice: 3.50,
                currentStock: 900,
                minStock: 200,
                maxStock: 2000,
                reorderPoint: 300,
                unit: 'capsules',
                batchNumber: 'OME2024011',
                manufactureDate: new Date('2024-01-25'),
                expiryDate: addDays(today, 580),
                barcode: '8901234567894',
                prescription: true,
                status: 'active'
            },
            {
                name: 'Aspirin 75mg Tablets',
                sku: 'MED-ASP-075',
                category: 'Medications',
                description: 'Blood thinner and pain relief',
                manufacturer: 'CardioPharm Inc',
                supplier: 'Global Pharma Distributors',
                buyingPrice: 0.30,
                sellingPrice: 0.80,
                currentStock: 4500,
                minStock: 500,
                maxStock: 8000,
                reorderPoint: 750,
                unit: 'tablets',
                batchNumber: 'ASP2024019',
                manufactureDate: new Date('2024-02-15'),
                expiryDate: addDays(today, 700),
                barcode: '8901234567895',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Ciprofloxacin 500mg Tablets',
                sku: 'MED-CIP-500',
                category: 'Medications',
                description: 'Broad-spectrum antibiotic',
                manufacturer: 'BioPharm Industries',
                supplier: 'MediSupply Co.',
                buyingPrice: 3.00,
                sellingPrice: 6.50,
                currentStock: 600,
                minStock: 150,
                maxStock: 1500,
                reorderPoint: 250,
                unit: 'tablets',
                batchNumber: 'CIP2024005',
                manufactureDate: new Date('2024-01-05'),
                expiryDate: addDays(today, 520),
                barcode: '8901234567896',
                prescription: true,
                status: 'active'
            },
            {
                name: 'Losartan 50mg Tablets',
                sku: 'MED-LOS-050',
                category: 'Medications',
                description: 'Blood pressure medication',
                manufacturer: 'CardioPharm Inc',
                supplier: 'Global Pharma Distributors',
                buyingPrice: 2.00,
                sellingPrice: 4.50,
                currentStock: 40,
                minStock: 200,
                maxStock: 2500,
                reorderPoint: 350,
                unit: 'tablets',
                batchNumber: 'LOS2024012',
                manufactureDate: new Date('2024-01-28'),
                expiryDate: addDays(today, 590),
                barcode: '8901234567897',
                prescription: true,
                status: 'active',
                notes: 'LOW STOCK - Reorder needed'
            },
            {
                name: 'Cetirizine 10mg Tablets',
                sku: 'MED-CET-010',
                category: 'Medications',
                description: 'Antihistamine for allergies',
                manufacturer: 'AllergyRelief Pharma',
                supplier: 'MediSupply Co.',
                buyingPrice: 0.60,
                sellingPrice: 1.50,
                currentStock: 2800,
                minStock: 300,
                maxStock: 4000,
                reorderPoint: 500,
                unit: 'tablets',
                batchNumber: 'CET2024020',
                manufactureDate: new Date('2024-02-18'),
                expiryDate: addDays(today, 680),
                barcode: '8901234567898',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Atorvastatin 20mg Tablets',
                sku: 'MED-ATO-020',
                category: 'Medications',
                description: 'Cholesterol-lowering medication',
                manufacturer: 'CardioPharm Inc',
                supplier: 'Global Pharma Distributors',
                buyingPrice: 2.50,
                sellingPrice: 5.50,
                currentStock: 1100,
                minStock: 250,
                maxStock: 2500,
                reorderPoint: 400,
                unit: 'tablets',
                batchNumber: 'ATO2024007',
                manufactureDate: new Date('2024-01-12'),
                expiryDate: addDays(today, 610),
                barcode: '8901234567899',
                prescription: true,
                status: 'active'
            },
            {
                name: 'Salbutamol Inhaler 100mcg',
                sku: 'MED-SAL-100',
                category: 'Medications',
                description: 'Bronchodilator for asthma',
                manufacturer: 'RespiroCare Labs',
                supplier: 'MediSupply Co.',
                buyingPrice: 8.00,
                sellingPrice: 15.00,
                currentStock: 150,
                minStock: 50,
                maxStock: 500,
                reorderPoint: 80,
                unit: 'pieces',
                batchNumber: 'SAL2024003',
                manufactureDate: new Date('2024-01-08'),
                expiryDate: addDays(today, 480),
                barcode: '8901234567900',
                prescription: true,
                status: 'active'
            },
            {
                name: 'Insulin Glargine 100IU/ml',
                sku: 'MED-INS-100',
                category: 'Medications',
                description: 'Long-acting insulin injection',
                manufacturer: 'DiabeCare Labs',
                supplier: 'Global Pharma Distributors',
                buyingPrice: 25.00,
                sellingPrice: 45.00,
                currentStock: 80,
                minStock: 30,
                maxStock: 200,
                reorderPoint: 50,
                unit: 'vials',
                batchNumber: 'INS2024001',
                manufactureDate: new Date('2024-02-01'),
                expiryDate: addDays(today, 365),
                barcode: '8901234567901',
                prescription: true,
                status: 'active',
                storageLocation: 'Refrigerator A1'
            },
            {
                name: 'Diclofenac Gel 1%',
                sku: 'MED-DIC-GEL',
                category: 'Medications',
                description: 'Topical anti-inflammatory gel',
                manufacturer: 'TopicalCare Inc',
                supplier: 'MediSupply Co.',
                buyingPrice: 4.00,
                sellingPrice: 8.50,
                currentStock: 250,
                minStock: 50,
                maxStock: 500,
                reorderPoint: 100,
                unit: 'tubes',
                batchNumber: 'DIC2024016',
                manufactureDate: new Date('2024-02-10'),
                expiryDate: addDays(today, 550),
                barcode: '8901234567902',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Amoxicillin Suspension 125mg/5ml',
                sku: 'MED-AMX-SUS',
                category: 'Medications',
                description: 'Pediatric antibiotic suspension',
                manufacturer: 'BioPharm Industries',
                supplier: 'Global Pharma Distributors',
                buyingPrice: 3.50,
                sellingPrice: 7.00,
                currentStock: 180,
                minStock: 60,
                maxStock: 400,
                reorderPoint: 100,
                unit: 'bottles',
                batchNumber: 'AMXS2024009',
                manufactureDate: new Date('2024-01-20'),
                expiryDate: addDays(today, 450),
                barcode: '8901234567903',
                prescription: true,
                status: 'active'
            },
            {
                name: 'Ranitidine 150mg Tablets',
                sku: 'MED-RAN-150',
                category: 'Medications',
                description: 'H2 blocker for acid reflux',
                manufacturer: 'GastroMed Solutions',
                supplier: 'MediSupply Co.',
                buyingPrice: 0.80,
                sellingPrice: 2.00,
                currentStock: 1800,
                minStock: 250,
                maxStock: 3000,
                reorderPoint: 400,
                unit: 'tablets',
                batchNumber: 'RAN2024013',
                manufactureDate: new Date('2024-01-30'),
                expiryDate: addDays(today, 620),
                barcode: '8901234567904',
                prescription: false,
                status: 'active'
            },

            // MEDICAL SUPPLIES (10 products)
            {
                name: 'Sterile Gauze Pads 4x4 inch',
                sku: 'SUP-GAU-4X4',
                category: 'Medical Supplies',
                description: 'Sterile cotton gauze pads',
                manufacturer: 'MedicalCare Supplies',
                supplier: 'Healthcare Distributors',
                buyingPrice: 0.15,
                sellingPrice: 0.40,
                currentStock: 10000,
                minStock: 2000,
                maxStock: 20000,
                reorderPoint: 3000,
                unit: 'pieces',
                batchNumber: 'GAU2024025',
                manufactureDate: new Date('2024-03-01'),
                expiryDate: addDays(today, 900),
                barcode: '8901234567905',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Disposable Syringes 5ml',
                sku: 'SUP-SYR-005',
                category: 'Medical Supplies',
                description: 'Sterile disposable syringes with needle',
                manufacturer: 'SafetyMed Corp',
                supplier: 'MediSupply Co.',
                buyingPrice: 0.25,
                sellingPrice: 0.60,
                currentStock: 5000,
                minStock: 1000,
                maxStock: 10000,
                reorderPoint: 1500,
                unit: 'pieces',
                batchNumber: 'SYR2024018',
                manufactureDate: new Date('2024-02-12'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567906',
                prescription: false,
                status: 'active'
            },
            {
                name: 'IV Cannula 20G',
                sku: 'SUP-CAN-020',
                category: 'Medical Supplies',
                description: 'Intravenous cannula 20 gauge',
                manufacturer: 'VenousCare Inc',
                supplier: 'Healthcare Distributors',
                buyingPrice: 0.80,
                sellingPrice: 1.80,
                currentStock: 800,
                minStock: 200,
                maxStock: 1500,
                reorderPoint: 300,
                unit: 'pieces',
                batchNumber: 'CAN2024010',
                manufactureDate: new Date('2024-01-22'),
                expiryDate: addDays(today, 1200),
                barcode: '8901234567907',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Surgical Gloves Size M',
                sku: 'SUP-GLV-MED',
                category: 'Medical Supplies',
                description: 'Latex surgical gloves medium size',
                manufacturer: 'GloveTech Industries',
                supplier: 'MediSupply Co.',
                buyingPrice: 0.20,
                sellingPrice: 0.50,
                currentStock: 8000,
                minStock: 1500,
                maxStock: 15000,
                reorderPoint: 2500,
                unit: 'pairs',
                batchNumber: 'GLV2024021',
                manufactureDate: new Date('2024-02-20'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567908',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Blood Pressure Monitor Digital',
                sku: 'SUP-BPM-DIG',
                category: 'Medical Supplies',
                description: 'Digital blood pressure monitoring device',
                manufacturer: 'VitalTech Solutions',
                supplier: 'Healthcare Distributors',
                buyingPrice: 45.00,
                sellingPrice: 85.00,
                currentStock: 25,
                minStock: 10,
                maxStock: 50,
                reorderPoint: 15,
                unit: 'pieces',
                batchNumber: 'BPM2024002',
                manufactureDate: new Date('2024-01-15'),
                expiryDate: addDays(today, 1825),
                barcode: '8901234567909',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Surgical Masks 3-Ply',
                sku: 'SUP-MSK-3PL',
                category: 'Medical Supplies',
                description: 'Disposable 3-ply surgical face masks',
                manufacturer: 'ProtectCare Ltd',
                supplier: 'MediSupply Co.',
                buyingPrice: 0.10,
                sellingPrice: 0.30,
                currentStock: 15000,
                minStock: 3000,
                maxStock: 25000,
                reorderPoint: 5000,
                unit: 'pieces',
                batchNumber: 'MSK2024027',
                manufactureDate: new Date('2024-03-05'),
                expiryDate: addDays(today, 730),
                barcode: '8901234567910',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Thermometer Digital',
                sku: 'SUP-THM-DIG',
                category: 'Medical Supplies',
                description: 'Digital oral thermometer',
                manufacturer: 'TempCheck Inc',
                supplier: 'Healthcare Distributors',
                buyingPrice: 5.00,
                sellingPrice: 12.00,
                currentStack: 150,
                minStock: 30,
                maxStock: 200,
                reorderPoint: 50,
                unit: 'pieces',
                batchNumber: 'THM2024014',
                manufactureDate: new Date('2024-02-01'),
                expiryDate: addDays(today, 1460),
                barcode: '8901234567911',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Catheter Foley 16F',
                sku: 'SUP-CAT-016',
                category: 'Medical Supplies',
                description: 'Urinary catheter Foley type 16 French',
                manufacturer: 'UroCare Solutions',
                supplier: 'MediSupply Co.',
                buyingPrice: 2.50,
                sellingPrice: 5.50,
                currentStock: 200,
                minStock: 50,
                maxStock: 400,
                reorderPoint: 80,
                unit: 'pieces',
                batchNumber: 'CAT2024006',
                manufactureDate: new Date('2024-01-10'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567912',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Oxygen Mask Adult',
                sku: 'SUP-OXY-ADU',
                category: 'Medical Supplies',
                description: 'Disposable oxygen mask for adults',
                manufacturer: 'RespiroCare Labs',
                supplier: 'Healthcare Distributors',
                buyingPrice: 1.50,
                sellingPrice: 3.50,
                currentStock: 300,
                minStock: 100,
                maxStock: 600,
                reorderPoint: 150,
                unit: 'pieces',
                batchNumber: 'OXY2024017',
                manufactureDate: new Date('2024-02-08'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567913',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Urine Collection Bag',
                sku: 'SUP-URI-BAG',
                category: 'Medical Supplies',
                description: 'Sterile urine collection bag 2000ml',
                manufacturer: 'UroCare Solutions',
                supplier: 'MediSupply Co.',
                buyingPrice: 1.20,
                sellingPrice: 2.80,
                currentStock: 400,
                minStock: 100,
                maxStock: 800,
                reorderPoint: 180,
                unit: 'pieces',
                batchNumber: 'URI2024023',
                manufactureDate: new Date('2024-02-25'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567914',
                prescription: false,
                status: 'active'
            },

            // PPE (5 products)
            {
                name: 'N95 Respirator Masks',
                sku: 'PPE-N95-MSK',
                category: 'PPE',
                description: 'N95 particulate respirator masks',
                manufacturer: 'SafetyFirst Corp',
                supplier: 'Safety Gear Ltd',
                buyingPrice: 1.50,
                sellingPrice: 3.50,
                currentStock: 2000,
                minStock: 500,
                maxStock: 5000,
                reorderPoint: 800,
                unit: 'pieces',
                batchNumber: 'N952024004',
                manufactureDate: new Date('2024-01-05'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567915',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Protective Gowns Disposable',
                sku: 'PPE-GWN-DIS',
                category: 'PPE',
                description: 'Disposable isolation gowns',
                manufacturer: 'ProtectCare Ltd',
                supplier: 'Safety Gear Ltd',
                buyingPrice: 2.00,
                sellingPrice: 4.50,
                currentStock: 1000,
                minStock: 200,
                maxStock: 2000,
                reorderPoint: 350,
                unit: 'pieces',
                batchNumber: 'GWN2024011',
                manufactureDate: new Date('2024-01-25'),
                expiryDate: addDays(today, 730),
                barcode: '8901234567916',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Face Shields Protective',
                sku: 'PPE-SHL-FAC',
                category: 'PPE',
                description: 'Reusable face shields with headband',
                manufacturer: 'SafetyFirst Corp',
                supplier: 'Safety Gear Ltd',
                buyingPrice: 3.00,
                sellingPrice: 7.00,
                currentStock: 300,
                minStock: 80,
                maxStock: 500,
                reorderPoint: 120,
                unit: 'pieces',
                batchNumber: 'SHL2024015',
                manufactureDate: new Date('2024-02-05'),
                expiryDate: addDays(today, 1460),
                barcode: '8901234567917',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Nitrile Gloves Powder-Free L',
                sku: 'PPE-GLV-NIT-L',
                category: 'PPE',
                description: 'Powder-free nitrile examination gloves large',
                manufacturer: 'GloveTech Industries',
                supplier: 'Safety Gear Ltd',
                buyingPrice: 0.25,
                sellingPrice: 0.60,
                currentStock: 6000,
                minStock: 1000,
                maxStock: 10000,
                reorderPoint: 1800,
                unit: 'pairs',
                batchNumber: 'NIT2024022',
                manufactureDate: new Date('2024-02-22'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567918',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Safety Goggles Medical',
                sku: 'PPE-GOG-MED',
                category: 'PPE',
                description: 'Protective safety goggles with anti-fog',
                manufacturer: 'SafetyFirst Corp',
                supplier: 'Safety Gear Ltd',
                buyingPrice: 4.00,
                sellingPrice: 9.00,
                currentStock: 180,
                minStock: 50,
                maxStock: 300,
                reorderPoint: 80,
                unit: 'pieces',
                batchNumber: 'GOG2024019',
                manufactureDate: new Date('2024-02-15'),
                expiryDate: addDays(today, 1825),
                barcode: '8901234567919',
                prescription: false,
                status: 'active'
            },

            // SURGICAL INSTRUMENTS (3 products)
            {
                name: 'Surgical Scissors Straight 14cm',
                sku: 'SUR-SCI-S14',
                category: 'Surgical Instruments',
                description: 'Stainless steel surgical scissors straight 14cm',
                manufacturer: 'SurgiTech Instruments',
                supplier: 'Surgical Equipment Co.',
                buyingPrice: 15.00,
                sellingPrice: 30.00,
                currentStock: 50,
                minStock: 15,
                maxStock: 80,
                reorderPoint: 25,
                unit: 'pieces',
                batchNumber: 'SCI2024001',
                manufactureDate: new Date('2024-01-01'),
                expiryDate: addDays(today, 3650),
                barcode: '8901234567920',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Forceps Artery Curved 16cm',
                sku: 'SUR-FOR-C16',
                category: 'Surgical Instruments',
                description: 'Curved artery forceps 16cm stainless steel',
                manufacturer: 'SurgiTech Instruments',
                supplier: 'Surgical Equipment Co.',
                buyingPrice: 18.00,
                sellingPrice: 35.00,
                currentStock: 40,
                minStock: 12,
                maxStock: 60,
                reorderPoint: 20,
                unit: 'pieces',
                batchNumber: 'FOR2024002',
                manufactureDate: new Date('2024-01-01'),
                expiryDate: addDays(today, 3650),
                barcode: '8901234567921',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Scalpel Blades #10 Sterile',
                sku: 'SUR-BLD-010',
                category: 'Surgical Instruments',
                description: 'Sterile disposable scalpel blades size 10',
                manufacturer: 'SharpEdge Medical',
                supplier: 'Surgical Equipment Co.',
                buyingPrice: 0.50,
                sellingPrice: 1.20,
                currentStock: 500,
                minStock: 100,
                maxStock: 1000,
                reorderPoint: 180,
                unit: 'pieces',
                batchNumber: 'BLD2024024',
                manufactureDate: new Date('2024-02-28'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567922',
                prescription: false,
                status: 'active'
            },

            // LABORATORY SUPPLIES (3 products)
            {
                name: 'Blood Collection Tubes EDTA',
                sku: 'LAB-BCT-EDT',
                category: 'Laboratory Supplies',
                description: 'Vacuum blood collection tubes with EDTA',
                manufacturer: 'LabTech Supplies',
                supplier: 'Laboratory Equipment Ltd',
                buyingPrice: 0.40,
                sellingPrice: 1.00,
                currentStock: 2000,
                minStock: 400,
                maxStock: 4000,
                reorderPoint: 700,
                unit: 'pieces',
                batchNumber: 'BCT2024026',
                manufactureDate: new Date('2024-03-02'),
                expiryDate: addDays(today, 730),
                barcode: '8901234567923',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Microscope Slides Glass',
                sku: 'LAB-SLD-GLS',
                category: 'Laboratory Supplies',
                description: 'Glass microscope slides 75x25mm',
                manufacturer: 'LabGlass Inc',
                supplier: 'Laboratory Equipment Ltd',
                buyingPrice: 0.15,
                sellingPrice: 0.40,
                currentStock: 5000,
                minStock: 1000,
                maxStock: 8000,
                reorderPoint: 1500,
                unit: 'pieces',
                batchNumber: 'SLD2024020',
                manufactureDate: new Date('2024-02-18'),
                expiryDate: addDays(today, 3650),
                barcode: '8901234567924',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Rapid COVID-19 Antigen Test Kits',
                sku: 'LAB-COV-RAT',
                category: 'Laboratory Supplies',
                description: 'Rapid antigen test kits for COVID-19',
                manufacturer: 'DiagnosticQuick Ltd',
                supplier: 'Laboratory Equipment Ltd',
                buyingPrice: 3.00,
                sellingPrice: 7.00,
                currentStock: 500,
                minStock: 100,
                maxStock: 1000,
                reorderPoint: 200,
                unit: 'kits',
                batchNumber: 'COV2024028',
                manufactureDate: new Date('2024-03-08'),
                expiryDate: addDays(today, 365),
                barcode: '8901234567925',
                prescription: false,
                status: 'active'
            },

            // FIRST AID (2 products)
            {
                name: 'First Aid Kit Complete',
                sku: 'AID-KIT-CMP',
                category: 'First Aid',
                description: 'Complete first aid kit with essential supplies',
                manufacturer: 'SafetyFirst Corp',
                supplier: 'Emergency Supplies Co.',
                buyingPrice: 25.00,
                sellingPrice: 50.00,
                currentStock: 80,
                minStock: 20,
                maxStock: 150,
                reorderPoint: 35,
                unit: 'kits',
                batchNumber: 'AID2024012',
                manufactureDate: new Date('2024-01-28'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567926',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Adhesive Bandages Assorted',
                sku: 'AID-BND-AST',
                category: 'First Aid',
                description: 'Assorted sizes adhesive bandages box of 100',
                manufacturer: 'BandageCare Inc',
                supplier: 'Emergency Supplies Co.',
                buyingPrice: 2.50,
                sellingPrice: 5.50,
                currentStock: 300,
                minStock: 80,
                maxStock: 500,
                reorderPoint: 120,
                unit: 'boxes',
                batchNumber: 'BND2024029',
                manufactureDate: new Date('2024-03-10'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567927',
                prescription: false,
                status: 'active'
            },

            // DIAGNOSTIC EQUIPMENT (2 products)
            {
                name: 'Stethoscope Dual Head',
                sku: 'DIA-STE-DUA',
                category: 'Diagnostic Equipment',
                description: 'Professional dual head stethoscope',
                manufacturer: 'VitalTech Solutions',
                supplier: 'Medical Equipment Distributors',
                buyingPrice: 35.00,
                sellingPrice: 70.00,
                currentStock: 45,
                minStock: 15,
                maxStock: 80,
                reorderPoint: 25,
                unit: 'pieces',
                batchNumber: 'STE2024005',
                manufactureDate: new Date('2024-01-08'),
                expiryDate: addDays(today, 3650),
                barcode: '8901234567928',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Pulse Oximeter Fingertip',
                sku: 'DIA-OXI-FIN',
                category: 'Diagnostic Equipment',
                description: 'Fingertip pulse oximeter with LED display',
                manufacturer: 'VitalTech Solutions',
                supplier: 'Medical Equipment Distributors',
                buyingPrice: 20.00,
                sellingPrice: 40.00,
                currentStock: 60,
                minStock: 20,
                maxStack: 100,
                reorderPoint: 30,
                unit: 'pieces',
                batchNumber: 'OXI2024013',
                manufactureDate: new Date('2024-01-30'),
                expiryDate: addDays(today, 1825),
                barcode: '8901234567929',
                prescription: false,
                status: 'active'
            },

            // DISPOSABLES (5 products)
            {
                name: 'Alcohol Swabs Sterile',
                sku: 'DIS-ALC-SWB',
                category: 'Disposables',
                description: 'Sterile 70% isopropyl alcohol swabs',
                manufacturer: 'SterileCare Products',
                supplier: 'Disposables Wholesale',
                buyingPrice: 0.05,
                sellingPrice: 0.15,
                currentStock: 20000,
                minStock: 5000,
                maxStock: 40000,
                reorderPoint: 8000,
                unit: 'pieces',
                batchNumber: 'ALC2024030',
                manufactureDate: new Date('2024-03-12'),
                expiryDate: addDays(today, 730),
                barcode: '8901234567930',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Cotton Balls Sterile',
                sku: 'DIS-COT-BAL',
                category: 'Disposables',
                description: 'Sterile cotton balls pack of 100',
                manufacturer: 'CottonCare Ltd',
                supplier: 'Disposables Wholesale',
                buyingPrice: 1.00,
                sellingPrice: 2.50,
                currentStock: 500,
                minStock: 100,
                maxStock: 800,
                reorderPoint: 180,
                unit: 'packs',
                batchNumber: 'COT2024031',
                manufactureDate: new Date('2024-03-15'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567931',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Tongue Depressors Wooden',
                sku: 'DIS-TNG-WOD',
                category: 'Disposables',
                description: 'Disposable wooden tongue depressors',
                manufacturer: 'WoodMed Supplies',
                supplier: 'Disposables Wholesale',
                buyingPrice: 0.03,
                sellingPrice: 0.10,
                currentStock: 10000,
                minStock: 2000,
                maxStock: 15000,
                reorderPoint: 3500,
                unit: 'pieces',
                batchNumber: 'TNG2024032',
                manufactureDate: new Date('2024-03-18'),
                expiryDate: addDays(today, 1460),
                barcode: '8901234567932',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Medical Tape Hypoallergenic',
                sku: 'DIS-TAP-HYP',
                category: 'Disposables',
                description: 'Hypoallergenic medical tape 1 inch x 10 yards',
                manufacturer: 'TapeCare Industries',
                supplier: 'Disposables Wholesale',
                buyingPrice: 0.80,
                sellingPrice: 2.00,
                currentStock: 800,
                minStock: 200,
                maxStock: 1500,
                reorderPoint: 350,
                unit: 'rolls',
                batchNumber: 'TAP2024033',
                manufactureDate: new Date('2024-03-20'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567933',
                prescription: false,
                status: 'active'
            },
            {
                name: 'Specimen Containers Sterile 50ml',
                sku: 'DIS-SPC-050',
                category: 'Disposables',
                description: 'Sterile specimen collection containers 50ml',
                manufacturer: 'LabTech Supplies',
                supplier: 'Disposables Wholesale',
                buyingPrice: 0.30,
                sellingPrice: 0.80,
                currentStock: 3000,
                minStock: 500,
                maxStock: 5000,
                reorderPoint: 1000,
                unit: 'pieces',
                batchNumber: 'SPC2024034',
                manufactureDate: new Date('2024-03-22'),
                expiryDate: addDays(today, 1095),
                barcode: '8901234567934',
                prescription: false,
                status: 'active'
            },

            // Some products with special conditions
            {
                name: 'Expired Antibiotic Sample',
                sku: 'MED-EXP-001',
                category: 'Medications',
                description: 'Sample expired product for testing',
                manufacturer: 'Test Corp',
                supplier: 'Test Supplier',
                buyingPrice: 1.00,
                sellingPrice: 2.00,
                currentStock: 50,
                minStock: 10,
                maxStock: 100,
                unit: 'tablets',
                batchNumber: 'EXP2023001',
                manufactureDate: new Date('2023-01-01'),
                expiryDate: addDays(today, -30), // Expired 30 days ago
                barcode: '8901234567935',
                prescription: true,
                status: 'inactive',
                notes: 'EXPIRED - For disposal'
            },
            {
                name: 'Low Stock Emergency Item',
                sku: 'MED-LOW-001',
                category: 'Medications',
                description: 'Emergency medication running low',
                manufacturer: 'EmergencyCare Ltd',
                supplier: 'MediSupply Co.',
                buyingPrice: 10.00,
                sellingPrice: 20.00,
                currentStock: 5,
                minStock: 50,
                maxStock: 200,
                reorderPoint: 80,
                unit: 'vials',
                batchNumber: 'LOW2024001',
                manufactureDate: new Date('2024-02-01'),
                expiryDate: addDays(today, 365),
                barcode: '8901234567936',
                prescription: true,
                status: 'active',
                notes: 'CRITICAL LOW STOCK - Order immediately'
            },
            {
                name: 'Out of Stock Item',
                sku: 'MED-OUT-001',
                category: 'Medications',
                description: 'Currently out of stock medication',
                manufacturer: 'PharmaCorp Ltd',
                supplier: 'Global Pharma Distributors',
                buyingPrice: 5.00,
                sellingPrice: 10.00,
                currentStock: 0,
                minStock: 100,
                maxStock: 500,
                reorderPoint: 150,
                unit: 'tablets',
                batchNumber: 'OUT2024001',
                manufactureDate: new Date('2024-01-01'),
                expiryDate: addDays(today, 500),
                barcode: '8901234567937',
                prescription: false,
                status: 'active',
                notes: 'OUT OF STOCK - Awaiting delivery'
            }
        ];

        console.log('Creating products...');
        await Product.insertMany(products);
        console.log(`✓ Created ${products.length} products`);

        // Create sample prescriptions
        const doctors = await User.find({ role: 'doctor' }).limit(3);
        const pharmacists = await User.find({ role: 'pharmacist' }).limit(2);

        if (doctors.length > 0) {
            const prescriptions = [
                {
                    prescriptionNumber: 'RX-202410-0001',
                    patient: {
                        id: 'P12345',
                        name: 'John Smith'
                    },
                    doctor: {
                        id: doctors[0]._id,
                        name: doctors[0].name
                    },
                    medications: [
                        {
                            name: 'Paracetamol 500mg',
                            dosage: '500mg',
                            quantity: 20,
                            duration: '5 days',
                            instructions: 'Take 1 tablet every 6 hours after meals'
                        },
                        {
                            name: 'Amoxicillin 250mg',
                            dosage: '250mg',
                            quantity: 15,
                            duration: '5 days',
                            instructions: 'Take 1 capsule every 8 hours'
                        }
                    ],
                    date: today,
                    time: '09:30 AM',
                    status: 'pending',
                    notes: 'Patient has mild fever and throat infection'
                },
                {
                    prescriptionNumber: 'RX-202410-0002',
                    patient: {
                        id: 'P12346',
                        name: 'Sarah Johnson'
                    },
                    doctor: {
                        id: doctors[0]._id,
                        name: doctors[0].name
                    },
                    medications: [
                        {
                            name: 'Metformin 500mg',
                            dosage: '500mg',
                            quantity: 60,
                            duration: '30 days',
                            instructions: 'Take 1 tablet twice daily with meals'
                        },
                        {
                            name: 'Atorvastatin 20mg',
                            dosage: '20mg',
                            quantity: 30,
                            duration: '30 days',
                            instructions: 'Take 1 tablet daily at bedtime'
                        }
                    ],
                    date: addDays(today, -1),
                    time: '02:15 PM',
                    status: 'pending',
                    notes: 'Regular diabetes and cholesterol management'
                },
                {
                    prescriptionNumber: 'RX-202410-0003',
                    patient: {
                        id: 'P12347',
                        name: 'Michael Brown'
                    },
                    doctor: {
                        id: doctors[0]._id,
                        name: doctors[0].name
                    },
                    medications: [
                        {
                            name: 'Salbutamol Inhaler',
                            dosage: '100mcg',
                            quantity: 1,
                            duration: '30 days',
                            instructions: 'Use 1-2 puffs when needed for breathing difficulty'
                        }
                    ],
                    date: addDays(today, -2),
                    time: '11:00 AM',
                    status: 'completed',
                    dispensedBy: pharmacists.length > 0 ? {
                        id: pharmacists[0]._id,
                        name: pharmacists[0].name
                    } : undefined,
                    dispensedAt: addDays(today, -2),
                    notes: 'Asthma management - emergency inhaler'
                }
            ];

            console.log('Creating sample prescriptions...');
            await Prescription.insertMany(prescriptions);
            console.log(`✓ Created ${prescriptions.length} prescriptions`);
        }

        // Display summary
        console.log('\n=== INVENTORY SEED DATA SUMMARY ===');
        console.log(`✓ Categories: ${categories.length}`);
        console.log(`✓ Products: ${products.length}`);
        console.log('  - Medications: 18');
        console.log('  - Medical Supplies: 10');
        console.log('  - PPE: 5');
        console.log('  - Surgical Instruments: 3');
        console.log('  - Laboratory Supplies: 3');
        console.log('  - First Aid: 2');
        console.log('  - Diagnostic Equipment: 2');
        console.log('  - Disposables: 5');
        console.log('  - Special test items: 3');
        console.log(`✓ Prescriptions: 3 (1 completed, 2 pending)`);
        console.log('\nNOTES:');
        console.log('- Some products are set to low stock or out of stock for testing');
        console.log('- One product is expired for testing alerts');
        console.log('- Expiry dates range from recently expired to 10 years in future');
        console.log('- All prices are in the local currency');
        console.log('===================================\n');

        process.exit(0);
    } catch (error) {
        console.error('Error seeding inventory data:', error);
        process.exit(1);
    }
};

seedInventoryData();
